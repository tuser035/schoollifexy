# ğŸ’ í•™ìƒ ì „í•™ ì²˜ë¦¬ ê°€ì´ë“œ

> ì´ ë¬¸ì„œëŠ” í•™ìƒ ë°ì´í„°ë¥¼ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
> ì¤‘í•™ìƒë„ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ì‰½ê²Œ ì„¤ëª…í–ˆì–´ìš”!

---

## ğŸ“‹ ì˜ˆì‹œ ë°ì´í„°

| í•­ëª© | ê°’ |
|------|-----|
| ì´ë¦„ | í™ê¸¸ë™ |
| í•™ë…„ | 1í•™ë…„ |
| ë°˜ | 1ë°˜ |
| ë²ˆí˜¸ | 30ë²ˆ |
| ì´ë©”ì¼ | aaa@gmail.com |
| ì „í™”ë²ˆí˜¸ | 010-1111-1111 |
| í•™ë²ˆ | 10130 (í•™ë…„+ë°˜+ë²ˆí˜¸) |

---

## 1ï¸âƒ£ ì „í•™ ì˜¨ í•™ìƒ ì¶”ê°€í•˜ê¸° (INSERT)

ìƒˆë¡œìš´ í•™ìƒì´ ì „í•™ì™”ì„ ë•Œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€í•˜ëŠ” ë°©ë²•ì´ì—ìš”.

### SQL ì½”ë“œ (ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì ‘ ì‹¤í–‰)

```sql
-- ìƒˆ í•™ìƒ ì¶”ê°€í•˜ê¸°
INSERT INTO students (
  student_id,    -- í•™ë²ˆ
  name,          -- ì´ë¦„
  grade,         -- í•™ë…„
  class,         -- ë°˜
  number,        -- ë²ˆí˜¸
  gmail,         -- ì´ë©”ì¼
  student_call   -- ì „í™”ë²ˆí˜¸
) VALUES (
  '10130',           -- í•™ë²ˆ: 1í•™ë…„ 1ë°˜ 30ë²ˆ
  'í™ê¸¸ë™',          -- ì´ë¦„
  1,                 -- í•™ë…„
  1,                 -- ë°˜
  30,                -- ë²ˆí˜¸
  'aaa@gmail.com',   -- ì´ë©”ì¼
  '010-1111-1111'    -- ì „í™”ë²ˆí˜¸
);
```

### JavaScript ì½”ë“œ (í”„ë¡œê·¸ë¨ì—ì„œ ì‹¤í–‰)

```javascript
import { supabase } from "@/integrations/supabase/client";

// ì „í•™ìƒ ì¶”ê°€ í•¨ìˆ˜
async function ì „í•™ìƒì¶”ê°€() {
  const { data, error } = await supabase
    .from('students')           // students í…Œì´ë¸”ì—
    .insert({                   // ìƒˆ ë°ì´í„° ì¶”ê°€
      student_id: '10130',      // í•™ë²ˆ
      name: 'í™ê¸¸ë™',           // ì´ë¦„
      grade: 1,                 // í•™ë…„
      class: 1,                 // ë°˜
      number: 30,               // ë²ˆí˜¸
      gmail: 'aaa@gmail.com',   // ì´ë©”ì¼
      student_call: '010-1111-1111'  // ì „í™”ë²ˆí˜¸
    });

  if (error) {
    console.log('âŒ ì¶”ê°€ ì‹¤íŒ¨:', error.message);
  } else {
    console.log('âœ… í•™ìƒ ì¶”ê°€ ì„±ê³µ!', data);
  }
}

// í•¨ìˆ˜ ì‹¤í–‰
ì „í•™ìƒì¶”ê°€();
```

### ğŸ“± React ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ

```jsx
import { useState } from 'react';
import { supabase } from "@/integrations/supabase/client";

function ì „í•™ìƒì¶”ê°€í¼() {
  const [ì´ë¦„, setì´ë¦„] = useState('');
  const [í•™ë…„, setí•™ë…„] = useState(1);
  const [ë°˜, setë°˜] = useState(1);
  const [ë²ˆí˜¸, setë²ˆí˜¸] = useState(1);
  const [ì´ë©”ì¼, setì´ë©”ì¼] = useState('');
  const [ì „í™”ë²ˆí˜¸, setì „í™”ë²ˆí˜¸] = useState('');

  const í•™ìƒì¶”ê°€ = async () => {
    // í•™ë²ˆ ë§Œë“¤ê¸°: í•™ë…„ + ë°˜(2ìë¦¬) + ë²ˆí˜¸(2ìë¦¬)
    const í•™ë²ˆ = `${í•™ë…„}${String(ë°˜).padStart(2, '0')}${String(ë²ˆí˜¸).padStart(2, '0')}`;

    const { error } = await supabase
      .from('students')
      .insert({
        student_id: í•™ë²ˆ,
        name: ì´ë¦„,
        grade: í•™ë…„,
        class: ë°˜,
        number: ë²ˆí˜¸,
        gmail: ì´ë©”ì¼,
        student_call: ì „í™”ë²ˆí˜¸
      });

    if (error) {
      alert('ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
    } else {
      alert('í•™ìƒì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }
  };

  return (
    <div>
      <h2>ğŸ†• ì „í•™ìƒ ë“±ë¡</h2>
      <input placeholder="ì´ë¦„" onChange={(e) => setì´ë¦„(e.target.value)} />
      <input placeholder="í•™ë…„" type="number" onChange={(e) => setí•™ë…„(Number(e.target.value))} />
      <input placeholder="ë°˜" type="number" onChange={(e) => setë°˜(Number(e.target.value))} />
      <input placeholder="ë²ˆí˜¸" type="number" onChange={(e) => setë²ˆí˜¸(Number(e.target.value))} />
      <input placeholder="ì´ë©”ì¼" onChange={(e) => setì´ë©”ì¼(e.target.value)} />
      <input placeholder="ì „í™”ë²ˆí˜¸" onChange={(e) => setì „í™”ë²ˆí˜¸(e.target.value)} />
      <button onClick={í•™ìƒì¶”ê°€}>ë“±ë¡í•˜ê¸°</button>
    </div>
  );
}
```

---

## 2ï¸âƒ£ í•™ìƒ ì •ë³´ ìˆ˜ì •í•˜ê¸° (UPDATE)

í•™ìƒì˜ ì „í™”ë²ˆí˜¸ë‚˜ ë‹¤ë¥¸ ì •ë³´ê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì´ì—ìš”.

### SQL ì½”ë“œ

```sql
-- í™ê¸¸ë™ í•™ìƒì˜ ì „í™”ë²ˆí˜¸ ë³€ê²½í•˜ê¸°
UPDATE students
SET student_call = '010-2222-2222'   -- ìƒˆ ì „í™”ë²ˆí˜¸
WHERE student_id = '10130';          -- í•™ë²ˆì´ 10130ì¸ í•™ìƒ
```

### JavaScript ì½”ë“œ

```javascript
import { supabase } from "@/integrations/supabase/client";

// ì „í™”ë²ˆí˜¸ ìˆ˜ì • í•¨ìˆ˜
async function ì „í™”ë²ˆí˜¸ìˆ˜ì •(í•™ë²ˆ, ìƒˆì „í™”ë²ˆí˜¸) {
  const { data, error } = await supabase
    .from('students')              // students í…Œì´ë¸”ì—ì„œ
    .update({                      // ë°ì´í„° ìˆ˜ì •
      student_call: ìƒˆì „í™”ë²ˆí˜¸    // ì „í™”ë²ˆí˜¸ë¥¼ ìƒˆ ë²ˆí˜¸ë¡œ
    })
    .eq('student_id', í•™ë²ˆ);      // í•´ë‹¹ í•™ë²ˆì¸ í•™ìƒë§Œ

  if (error) {
    console.log('âŒ ìˆ˜ì • ì‹¤íŒ¨:', error.message);
  } else {
    console.log('âœ… ì „í™”ë²ˆí˜¸ ìˆ˜ì • ì„±ê³µ!');
  }
}

// ì‚¬ìš© ì˜ˆì‹œ: í•™ë²ˆ 10130 í•™ìƒì˜ ì „í™”ë²ˆí˜¸ë¥¼ 010-2222-2222ë¡œ ë³€ê²½
ì „í™”ë²ˆí˜¸ìˆ˜ì •('10130', '010-2222-2222');
```

### ğŸ“± ì—¬ëŸ¬ ì •ë³´ í•œë²ˆì— ìˆ˜ì •í•˜ê¸°

```javascript
// ì—¬ëŸ¬ ì •ë³´ ìˆ˜ì • í•¨ìˆ˜
async function í•™ìƒì •ë³´ìˆ˜ì •(í•™ë²ˆ, ìˆ˜ì •í• ì •ë³´) {
  const { error } = await supabase
    .from('students')
    .update(ìˆ˜ì •í• ì •ë³´)
    .eq('student_id', í•™ë²ˆ);

  if (error) {
    console.log('âŒ ìˆ˜ì • ì‹¤íŒ¨:', error.message);
  } else {
    console.log('âœ… ì •ë³´ ìˆ˜ì • ì„±ê³µ!');
  }
}

// ì‚¬ìš© ì˜ˆì‹œ: ì „í™”ë²ˆí˜¸ì™€ ì´ë©”ì¼ ë™ì‹œì— ìˆ˜ì •
í•™ìƒì •ë³´ìˆ˜ì •('10130', {
  student_call: '010-3333-3333',
  gmail: 'new@gmail.com'
});
```

---

## 3ï¸âƒ£ ì „í•™ ê°„ í•™ìƒ ì‚­ì œí•˜ê¸° (DELETE)

í•™ìƒì´ ë‹¤ë¥¸ í•™êµë¡œ ì „í•™ê°”ì„ ë•Œ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ë²•ì´ì—ìš”.

### SQL ì½”ë“œ

```sql
-- í™ê¸¸ë™ í•™ìƒ ì‚­ì œí•˜ê¸°
DELETE FROM students
WHERE student_id = '10130';   -- í•™ë²ˆì´ 10130ì¸ í•™ìƒ ì‚­ì œ
```

### JavaScript ì½”ë“œ

```javascript
import { supabase } from "@/integrations/supabase/client";

// í•™ìƒ ì‚­ì œ í•¨ìˆ˜
async function ì „í•™ìƒì‚­ì œ(í•™ë²ˆ) {
  const { error } = await supabase
    .from('students')           // students í…Œì´ë¸”ì—ì„œ
    .delete()                   // ì‚­ì œ
    .eq('student_id', í•™ë²ˆ);   // í•´ë‹¹ í•™ë²ˆì¸ í•™ìƒ

  if (error) {
    console.log('âŒ ì‚­ì œ ì‹¤íŒ¨:', error.message);
  } else {
    console.log('âœ… í•™ìƒ ì‚­ì œ ì„±ê³µ!');
  }
}

// ì‚¬ìš© ì˜ˆì‹œ: í•™ë²ˆ 10130 í•™ìƒ ì‚­ì œ
ì „í•™ìƒì‚­ì œ('10130');
```

### âš ï¸ ì‚­ì œ ì „ í™•ì¸í•˜ê¸°

```javascript
// ì‚­ì œ ì „ í™•ì¸ í•¨ìˆ˜
async function ì•ˆì „í•˜ê²Œì‚­ì œ(í•™ë²ˆ) {
  // 1ë‹¨ê³„: ì •ë§ ì‚­ì œí• ì§€ í™•ì¸
  const í™•ì¸ = confirm('ì •ë§ë¡œ ì´ í•™ìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
  
  if (!í™•ì¸) {
    console.log('ì‚­ì œê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    return;
  }

  // 2ë‹¨ê³„: ì‚­ì œ ì‹¤í–‰
  const { error } = await supabase
    .from('students')
    .delete()
    .eq('student_id', í•™ë²ˆ);

  if (error) {
    alert('ì‚­ì œ ì‹¤íŒ¨: ' + error.message);
  } else {
    alert('í•™ìƒì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
  }
}
```

---

## 4ï¸âƒ£ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ ê°ì§€í•˜ê¸° (REALTIME)

ë°ì´í„°ê°€ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œë  ë•Œ ìë™ìœ¼ë¡œ ì•Œë¦¼ë°›ëŠ” ë°©ë²•ì´ì—ìš”.

### JavaScript ì½”ë“œ

```javascript
import { supabase } from "@/integrations/supabase/client";

// ì‹¤ì‹œê°„ ê°ì§€ ì‹œì‘
function ì‹¤ì‹œê°„ê°ì§€ì‹œì‘() {
  const channel = supabase
    .channel('í•™ìƒë³€ê²½ì•Œë¦¼')      // ì±„ë„ ì´ë¦„
    .on(
      'postgres_changes',         // ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½ ê°ì§€
      {
        event: '*',               // ëª¨ë“  ì´ë²¤íŠ¸ (INSERT, UPDATE, DELETE)
        schema: 'public',
        table: 'students'         // students í…Œì´ë¸”
      },
      (ë³€ê²½ë‚´ìš©) => {
        console.log('ğŸ“¢ ë³€ê²½ ê°ì§€!', ë³€ê²½ë‚´ìš©);
        
        // ì–´ë–¤ ì¢…ë¥˜ì˜ ë³€ê²½ì¸ì§€ í™•ì¸
        if (ë³€ê²½ë‚´ìš©.eventType === 'INSERT') {
          console.log('ğŸ†• ìƒˆ í•™ìƒ ì¶”ê°€ë¨:', ë³€ê²½ë‚´ìš©.new);
        } else if (ë³€ê²½ë‚´ìš©.eventType === 'UPDATE') {
          console.log('âœï¸ í•™ìƒ ì •ë³´ ìˆ˜ì •ë¨:', ë³€ê²½ë‚´ìš©.new);
        } else if (ë³€ê²½ë‚´ìš©.eventType === 'DELETE') {
          console.log('ğŸ—‘ï¸ í•™ìƒ ì‚­ì œë¨:', ë³€ê²½ë‚´ìš©.old);
        }
      }
    )
    .subscribe();

  console.log('ğŸ‘€ ì‹¤ì‹œê°„ ê°ì§€ ì‹œì‘!');
  
  return channel;  // ë‚˜ì¤‘ì— ê°ì§€ ì¤‘ë‹¨í•  ë•Œ ì‚¬ìš©
}

// ì‹¤ì‹œê°„ ê°ì§€ ì¤‘ë‹¨
function ì‹¤ì‹œê°„ê°ì§€ì¤‘ë‹¨(channel) {
  supabase.removeChannel(channel);
  console.log('ğŸ›‘ ì‹¤ì‹œê°„ ê°ì§€ ì¤‘ë‹¨ë¨');
}
```

### ğŸ“± Reactì—ì„œ ì‹¤ì‹œê°„ ê°ì§€í•˜ê¸°

```jsx
import { useEffect, useState } from 'react';
import { supabase } from "@/integrations/supabase/client";

function í•™ìƒëª©ë¡() {
  const [í•™ìƒë“¤, setí•™ìƒë“¤] = useState([]);

  useEffect(() => {
    // ì²˜ìŒì— í•™ìƒ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    async function í•™ìƒë¶ˆëŸ¬ì˜¤ê¸°() {
      const { data } = await supabase
        .from('students')
        .select('*')
        .order('grade')
        .order('class')
        .order('number');
      
      setí•™ìƒë“¤(data || []);
    }

    í•™ìƒë¶ˆëŸ¬ì˜¤ê¸°();

    // ì‹¤ì‹œê°„ ê°ì§€ ì„¤ì •
    const channel = supabase
      .channel('í•™ìƒëª©ë¡-ì‹¤ì‹œê°„')
      .on(
        'postgres_changes',
        { event: '*', schema: 'public', table: 'students' },
        () => {
          // ë³€ê²½ì´ ìˆìœ¼ë©´ ëª©ë¡ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
          í•™ìƒë¶ˆëŸ¬ì˜¤ê¸°();
        }
      )
      .subscribe();

    // ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ê°ì§€ ì¤‘ë‹¨
    return () => {
      supabase.removeChannel(channel);
    };
  }, []);

  return (
    <div>
      <h2>ğŸ“š í•™ìƒ ëª©ë¡</h2>
      <table>
        <thead>
          <tr>
            <th>í•™ë²ˆ</th>
            <th>ì´ë¦„</th>
            <th>í•™ë…„</th>
            <th>ë°˜</th>
            <th>ë²ˆí˜¸</th>
          </tr>
        </thead>
        <tbody>
          {í•™ìƒë“¤.map((í•™ìƒ) => (
            <tr key={í•™ìƒ.student_id}>
              <td>{í•™ìƒ.student_id}</td>
              <td>{í•™ìƒ.name}</td>
              <td>{í•™ìƒ.grade}</td>
              <td>{í•™ìƒ.class}</td>
              <td>{í•™ìƒ.number}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
```

---

## ğŸ“ ìš”ì•½ ì •ë¦¬

| ì‘ì—… | SQL ëª…ë ¹ì–´ | JavaScript ë©”ì„œë“œ |
|------|-----------|------------------|
| ì¶”ê°€ | `INSERT INTO` | `.insert()` |
| ìˆ˜ì • | `UPDATE ... SET` | `.update()` |
| ì‚­ì œ | `DELETE FROM` | `.delete()` |
| ì¡°íšŒ | `SELECT * FROM` | `.select()` |

---

## ğŸ¯ ì—°ìŠµ ë¬¸ì œ

1. **ì¶”ê°€ ì—°ìŠµ**: ê¹€ì² ìˆ˜(2í•™ë…„ 3ë°˜ 15ë²ˆ, bbb@gmail.com, 010-4444-4444) í•™ìƒì„ ì¶”ê°€í•´ë³´ì„¸ìš”.

2. **ìˆ˜ì • ì—°ìŠµ**: ê¹€ì² ìˆ˜ í•™ìƒì˜ ì´ë©”ì¼ì„ ccc@gmail.comìœ¼ë¡œ ë³€ê²½í•´ë³´ì„¸ìš”.

3. **ì‚­ì œ ì—°ìŠµ**: ê¹€ì² ìˆ˜ í•™ìƒì„ ì‚­ì œí•´ë³´ì„¸ìš”.

---

## â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

### Q: ì¶”ê°€í•  ë•Œ "duplicate key" ì—ëŸ¬ê°€ ë‚˜ìš”
> ê°™ì€ í•™ë²ˆ(student_id)ì´ ì´ë¯¸ ìˆì–´ì„œ ê·¸ë˜ìš”. í•™ë²ˆì„ ë‹¤ë¥´ê²Œ í•´ë³´ì„¸ìš”.

### Q: ìˆ˜ì •ì´ ì•ˆ ë¼ìš”
> `.eq('student_id', í•™ë²ˆ)` ë¶€ë¶„ì—ì„œ í•™ë²ˆì´ ì •í™•í•œì§€ í™•ì¸í•´ë³´ì„¸ìš”.

### Q: ì‚­ì œí–ˆëŠ”ë° ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ ìˆì–´ìš”
> í™”ë©´ì„ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜, ì‹¤ì‹œê°„ ê°ì§€ë¥¼ ì„¤ì •í–ˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.

---

ğŸ“… ì‘ì„±ì¼: 2025-12-13
